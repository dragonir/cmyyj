var Yyplay=function(){function e(){if(a.canDo){if(a.nowNum+=10,a.nowNum>=110)return a.nowNum=100,void 0;console.log("v_c.nowNum "+a.nowNum),$(".line-inner").css("width",a.nowNum+"%"),100==a.nowNum&&(clearInterval(a.allSi),a.allSi=null,h())}}function f(){return a.canDo?(a.nowNum-=10,a.nowNum<=-10?(a.nowNum=0,void 0):($(".line-inner").css("width",a.nowNum+"%"),void 0)):void 0}function g(){var b=a.nowNum;return b=Math.round(b/10),1>=b?b=0:b>=2&&4>=b?b=3:b>=5&&7>=b?b=6:b>=8&&10>=b&&(b=9),console.log(b+"num"),b}function h(){var e,f,h,j,k,l,b=g();a.canDo=!1,a.nowNum=0,clearInterval(a.supLineSi),e=c.setStaId(),f=_user["user_id"],h=_user["weixin_token"],j=_user["sharer_info"]["share_page"],k=e,l=b,console.log("thres "+l),d.challengePlay(f,h,j,k,l,function(){setTimeout(function(){i()},150)})}function i(){a.canDo=!0,a.startTimeTag=!0,a.allTime=5,$(".line-inner").css("width","0"),$("#yyplay-txt").removeClass("n1 n2 n3 n4 n5").addClass("n5")}function j(){a.startTimeTag&&(a.startTimeTag=!1,clearInterval(a.allSi),a.allSi=setInterval(function(){var b=a.allTime;$("#yyplay-txt").removeClass("n1 n2 n3 n4 n5").addClass("n"+(b-1)),a.allTime--,0==a.allTime&&(clearInterval(a.allSi),a.allSi=null,h())},1e3))}function k(a){var b,c;return o(),b=parseInt($(".scene").css("width").match(/\d+/g).toString()),b-=$(".scene-wrap").width(),b=-b,$(".scene")[0].offsetLeft<=b?($(".scene").css("left",b+"px"),void 0):(c=$(".scene")[0].offsetLeft-a,b>c&&(c=b),$(".scene").css("left",c+"px"),void 0)}function l(a){if(o(),$(".scene")[0].offsetLeft>=0)return $(".scene").css("left","0px"),void 0;var b=$(".scene")[0].offsetLeft+a;b>0&&(b=0),$(".scene").css("left",b+"px")}function m(){$(".scene").on("touchstart",function(c){$(this),clearInterval(a.stageSi);var e=c.changedTouches?c.changedTouches[0]:null;e=e?e:c.originalEvent.changedTouches[0],b.X=e.pageX}),console.log(1111),$(".scene").on("touchmove",function(a){var c,d,e,f;o(),c=a.changedTouches?a.changedTouches[0]:null,c=c?c:a.originalEvent.changedTouches[0],d=c.pageX-b.X,b.X=c.pageX,e=parseInt($(".scene").css("width").match(/\d+/g).toString()),e-=$(".scene-wrap").width(),e=-e,f=$(".scene")[0].offsetLeft+d/2,f>=0&&(f=0),e>=f&&(f=e),$(".scene").css("left",f+"px")}),$(".scene").on("touchend",function(){$(this),clearInterval(a.stageSi)})}function n(){var a=1724,b=640,c=a/b,d=$(window).height()*c;$(".scene").css("width",d)}function o(){var a=parseInt($(".scene").css("width").match(/\d+/g).toString());a-=$(".scene-wrap").width(),a=-a,$(".scene")[0].offsetLeft>=0?$(".scene-lbtn").hide():$(".scene-lbtn").show(),$(".scene")[0].offsetLeft<=a?$(".scene-rbtn").hide():$(".scene-rbtn").show()}function q(){p(),m(),o()}var a={supLineSi:null,allSi:null,supLineSt:null,stageSi:null,stageSt:null,startTimeTag:!0,allTime:5,nowNum:0,canDo:!0},b={X:0,Y:0},c=COMMOM,d=c.ajxFn(),p=function(){$(".yyplay-btn").on("touchstart",function(){e(),clearInterval(a.supLineSi),clearTimeout(a.supLineSt),j(),a.supLineSt=setTimeout(function(){a.supLineSi=setInterval(function(){f()},100)},50)}),$(".scene").on("touchstart",function(a){console.log(a.target.className);var b=a.target.className;return"scene"==b?(a.preventDefault(),!1):void 0}),$(".scene-rbtn").on("touchstart",function(b){return b.preventDefault(),clearInterval(a.stageSi),a.stageSi=setInterval(function(){k(25)},60),!1}),$(".scene-rbtn").on("touchend",function(){clearInterval(a.stageSi)}),$(".scene-lbtn").on("touchstart",function(b){return b.preventDefault(),clearInterval(a.stageSi),a.stageSi=setInterval(function(){l(25)},60),!1}),$(".scene-lbtn").on("touchend",function(){clearInterval(a.stageSi)})};return{initSceneWidth:n,init:q}}();